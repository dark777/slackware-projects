#https://sistematico.github.io/criando-e-aplicando-um-patch/
#https://www.vivaolinux.com.br/artigo/diff-e-patch-Um-guia-sem-hora-pra-acabar?
#Criando um patch e aplicando as diferenças.


1º)para isso criaremos 2 arquivos o file1.txt e o file2.txt.

O conteúdo do file1.txt será o conteudo abaixo:

Estou aprendendo a criar um patch e parece ser dificil. 


O conteúdo do file2.txt será o conteúdo abaixo:

Estou aprendendo a criar um patch e parece ser difícil, mas é legal e interessante.


2º) Vamos criar tambem o file1modificado.txt que será o mesmo file1.txt e que na realidade
será o arquivo em que aplicaremos a mudança apenas para exemlo de diferença quando o
correto seria aplicar as mudanças direto no file1.txt.

O conteudo de file1modificado.txt será o conteúdo abaixo:

Estou aprendendo a criar um patch e parece ser dificil.


3º) Agora, o que devemos fazer, é identificar suas diferenças com o comando diff:

bash-4.4$ diff file1.txt file2.txt

1c1
< Estou aprendendo a criar um patch e parece ser dificil. 
---
> Estou aprendendo a criar um patch e parece ser dificíl, mas é legal e interessante.
\ Nenhum caractere de nova linha no final do arquivo


4º) agora vamos criar um diff que será aplicado ao arquivo file1modificado.txt

bash-4.4$ diff -Naur file1.txt file2.txt > file12diff.diff

ou

bash-4.4$ diff -Naur file1.txt file2.txt > file12diff.patch


5º) Testando o patch

Se nao retornar nada o patch esta OK
bash-4.4$ patch -Np1 -s --dry-run  file1.txt  file12diff.diff

ou

bash-4.4$ patch -Np1 -s --dry-run  file1modificado.txt  file12diff.patch


Se der erro ele mostra FAILED
bash-4.4$ patch -Np1 -s --dry-run  file1.txt  file12diff.diff
1 out of 1 hunk FAILED


6º) Aplicando o patch

Sem Backup
bash-4.4$ patch -p0 file1modificado.txt < file12diff.diff
patching file file1modificado.txt

bash-4.4$ patch -p0  file1modificado.txt < file12diff.patch
patching file file1modificado.txt


Com Backup
bash-4.4$ patch -p1  file1modificado.txt < file12diff.diff
patching file file1modificado.txt

bash-4.4$ patch -p1  file1modificado.txt < file12diff.patch
patching file file1modificado.txt


7º) Vejamos agora a diferença do arquivo file1.txt e do file1modificado.txt

bash-4.4$ diff file1.txt file1modificado.txt
1c1
< Estou aprendendo a criar um patch e parece ser dificil. 
\ Nenhum caractere de nova linha no final do arquivo
---
> Estou aprendendo a criar um patch e parece ser difícil, mas é legal e interessante.
\ Nenhum caractere de nova linha no final do arquivo
